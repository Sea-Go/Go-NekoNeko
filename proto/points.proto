syntax = "proto3";

package points;
option go_package = ".";

message PointsRecord {
  string article_id = 1;
  int32 coin_count = 2;
  string date = 3;
}

message SignInReq {
  int64 user_id = 1;
}

message SignInResp {
  bool success = 1;
  string message = 2;
}

message AddArticlePointReq {
  int64 user_id = 1;
  int64 article_id = 2;
  int64 coin_count = 3;
}

message AddArticlePointResp {
  bool success = 1;
  string message = 2;
}

message GetUserAddPointHistoryReq {
  int64 user_id = 1;
}

message GetUserAddPointHistoryResp {
  repeated PointsRecord points_record = 1;
}

message Task{
  string name = 1;
  int64 completion_progress = 2; // 完成进度
  int64 required_progress = 3;  // 总要求进度
}

message GetTaskProgressReq{
  int64 user_id = 1;
}

message GetTaskProgressResp{
  repeated Task task = 1;
}

service PointsService {

  rpc SignIn(SignInReq) returns (SignInResp); //签到
  rpc AddArticlePoint(AddArticlePointReq) returns (AddArticlePointResp); //对某个文章进行投币
  rpc GetUserAddPointHistory(GetUserAddPointHistoryReq) returns (GetUserAddPointHistoryResp); //获取用户的投币记录
  rpc GetTaskProgress(GetTaskProgressReq) returns (GetTaskProgressResp); //获取用户的任务进度

}
